namespace SpriteKind {
    export const ScaredPlayer = SpriteKind.create()
    export const EctoGlob = SpriteKind.create()
}
namespace myTiles {
    //% blockIdentity=images._tile
    export const tile0 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile1 = img`
d d d d d d d d d d d d d d d d 
d c c c c c c c c c c c c c c d 
d c c c c c c c c c c c c c c d 
d c c d d c c c c c c c d c c d 
d c c c d c c c c c c c c c c d 
d c c c d c c c c c c c c c c d 
d c c c d c c c c c c c c c c d 
d c c c d c c c c c c c c c c d 
d c c c c c c c c c d c c c c d 
d c c c c c c c c c d c c c c d 
d c c c c c c c c c d c c c c d 
d c c c c c c c c c d c c c c d 
d c c c c c c c c c c d c c c d 
d c c c c c c c c c c c c c c d 
d c c c c c c c c c c c c c c d 
d d d d d d d d d d d d d d d d 
`
    //% blockIdentity=images._tile
    export const tile2 = img`
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
`
    //% blockIdentity=images._tile
    export const tile3 = img`
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
`
    //% blockIdentity=images._tile
    export const tile4 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . 1 1 . . . . . . . . . . 
. . . 1 1 . 1 . . . . . . . . . 
. . 1 1 . . 1 . . . . . . . . . 
. 1 1 . . . 1 . . . . . . . . . 
. 1 . . . . 1 . . 1 1 . . . . . 
. 1 . . . . 1 . 1 . 1 . 1 1 . . 
. 1 . . . . 1 . 1 . 1 1 1 1 . . 
. . 1 . . 1 . . 1 1 1 1 1 1 . . 
. . 1 1 1 1 . . 1 1 . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile5 = img`
. . . . . . . . . . . . . . . . 
. . f . . . . . . . . . . . . . 
. . f . . f . . . . . . . . . . 
. . f . f f . . . . . . . f f . 
. . f f f . . . . . . . . f f . 
. . f f . . . f . . f f . . f . 
. . f . f f f . . . f . f . f . 
. . f . . . . . . . f . f . f . 
. . f . . . . . . . f f f f f . 
. . 2 . . 2 . . . . . . f . . . 
. . f f . . . . . . . . f . . . 
. . . f f . . . . . . f f . . . 
. . . . f . . . . . f f . . . . 
. . . f f . . . . . f 2 . 2 . . 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
`
    //% blockIdentity=images._tile
    export const tile6 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . 9 9 9 9 9 . . . . 
. . . . . . 9 9 1 1 1 1 . . . . 
. . . . . . 9 1 1 1 1 1 9 . . . 
. . . . . . 9 1 1 1 1 1 9 . . . 
. . . . . 9 9 1 1 8 1 1 9 . . . 
. . . 9 9 1 1 1 8 8 8 1 9 9 9 . 
`
    //% blockIdentity=images._tile
    export const tile7 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile8 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . f f f f f . . . . 
. . . . . . f f f f f f . . . . 
. . . . . . f f f f f f f . . . 
. . . . . . f f f f f f f . . . 
. . . . . f f f f c f f f . . . 
. . . f f f f f c c c f f f f . 
`
    //% blockIdentity=images._tile
    export const tile9 = img`
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
}
function lightsOff () {
    lantern.stopLanternEffect()
    tilemap.replaceAllTiles(myTiles.tile1, myTiles.tile3)
    tilemap.replaceAllTiles(myTiles.tile6, myTiles.tile8)
    scene.setBackgroundColor(15)
    george.setKind(SpriteKind.ScaredPlayer)
}
scene.onOverlapTile(SpriteKind.ScaredPlayer, myTiles.tile5, function (sprite, location) {
    game.over(false)
})
sprites.onOverlap(SpriteKind.EctoGlob, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.spray, 100)
    info.changeScoreBy(10)
    info.changeLifeBy(1)
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    holdingLight = !(holdingLight)
    if (holdingLight) {
        lightsOn()
    } else {
        lightsOff()
    }
})
scene.onOverlapTile(SpriteKind.Player, myTiles.tile5, function (sprite, location) {
    game.over(false)
})
scene.onOverlapTile(SpriteKind.Player, myTiles.tile6, function (sprite, location) {
    tiles.setTileAt(location, myTiles.tile0)
    info.changeScoreBy(1)
    if (info.score() == 1) {
        game.showLongText("Ectoplasm... this must be the key to understanding these beings", DialogLayout.Bottom)
        game.showLongText("I need to find more.", DialogLayout.Bottom)
    } else if (info.score() == 2) {
        game.showLongText("The beings attack the light...", DialogLayout.Bottom)
        game.showLongText("The light might be dangerous to them.", DialogLayout.Bottom)
    } else if (info.score() == 3) {
        game.showLongText("I've got it!", DialogLayout.Bottom)
        game.showLongText("I can combine my ectoplasm with my flashlight to defeat them!", DialogLayout.Bottom)
        lightsOn()
        won = true
        ecto = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . 1 1 1 . . . . 
. . . . . . . 1 1 1 9 1 . . . . 
. . . . 1 1 1 9 9 6 6 . 1 . . . 
. . . 1 1 9 9 6 6 . 6 . 1 1 . . 
. . . 1 9 6 6 6 6 . 6 . 9 1 . . 
. . . 1 9 6 6 . . . 6 6 . 9 1 . 
. . . . 1 6 6 6 6 . . 6 . 9 1 . 
. . . . 1 9 6 . 6 . . 6 . 9 1 . 
. . . . . 1 9 6 6 6 6 6 9 9 1 . 
. . . . . . 1 1 9 9 9 9 1 1 1 . 
. . . . . . . 1 1 1 1 1 . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`, SpriteKind.EctoGlob)
        tiles.placeOnTile(ecto, tilemap.locationOfSprite(george))
        ecto.follow(sprites.allOfKind(SpriteKind.Enemy)[0], 200)
        lantern.stopLanternEffect()
        lantern.startLanternEffect(ecto)
        george.setKind(SpriteKind.ScaredPlayer)
        for (let value of tiles.getTilesByType(myTiles.tile1)) {
            tiles.setWallAt(value, false)
        }
        george.ay = -2
        george.image.replace(15, 9)
    }
})
function lightsOn () {
    lantern.startLanternEffect(george)
    tilemap.replaceAllTiles(myTiles.tile3, myTiles.tile1)
    tilemap.replaceAllTiles(myTiles.tile8, myTiles.tile6)
    scene.setBackgroundColor(11)
    george.setKind(SpriteKind.Player)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (george.vy == 0) {
        george.vy = -200
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    otherSprite.destroy()
})
scene.onOverlapTile(SpriteKind.ScaredPlayer, myTiles.tile9, function (sprite, location) {
    game.over(true)
})
sprites.onCreated(SpriteKind.Enemy, function (sprite) {
    animation.runImageAnimation(
    sprite,
    [img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . f f f . . 
. . . . f f f f f f f f f f . . 
. . . . f f f f f f f f f f . . 
. . . f f f f f f f f f f f . . 
. . . f f f 1 f f 1 f f f . . . 
. . . f f f f f f f f f f . . . 
. . . f f f f f f f f f f . . . 
. . . f f f f f f f f f f . . . 
. . . f f f f f f f f f . . . . 
. . . f f f f f f f f f . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . f f f . . 
. . . . f f f f f f f f f f . . 
f f f f f f f f f f f f f f . . 
f f f f f f f f f f f f f f . . 
f f f f f f 1 f f 1 f f f . . . 
f f f f f f f f f f f f f . . . 
. f f f f f f f f f f f f . . . 
. f f f f f f f f f f f f . . . 
. f f f f f f f f f f f . . . . 
. . f f f f f f f f f f . . . . 
. . f f f f f f f f f . . . . . 
. . . f f f f f f f f . . . . . 
. . . . f f f f f f . . . . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . . . . . . . 
. . . f f f f f f f f . . . . . 
. . . f f f f f f f f f f f . . 
. . . f f f f f f f f f f f . . 
f f f f f f f f f f f f f f . . 
f f f f f f f f f f f f f f . . 
f f f f f f 1 f f 1 f f f . . . 
f f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. . f f f f f f f f f f f f f f 
. . f f f f f f f f f f f f f . 
. . . f f f f f f f f f f f f . 
. . . . f f f f f f . f f f f . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f f f f f . 
. . . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f 1 f f f 1 f f . . . 
f f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. . f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f . 
. f f f f f f f f f . f f f f . 
. f f f . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f f f f f . 
. . . . . f f f f f f f f f f f 
. . . . . . . f f f f f f f f f 
. . . . . . . f f f f f f f f f 
f f f . . . . f f f f f f f f f 
f f f f . . . f f f f f f f f f 
f f f f f f f 1 f f 1 f f . . . 
f f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. . f f f f f f f f f f f f f f 
. f f f f f f . . . . f f f f . 
. f f f f f f . . . . . f f f . 
. f f f f f f . . . . . f f f . 
. f f f . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . f f f f f f . . . . . 
. . . . . . . f f f f . . . . . 
. . . . . . . f f f f f . . . f 
. . f . . . . f f f f f f f f f 
. . f f . . . f f f f f f f f f 
f f f f f f 1 f f 1 f f f . . . 
f f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. f . . . f f . . . . f f f f . 
. . . . . f f . . . . . f . . . 
. . . . . f f . . . . . f . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . . . f f f . . . . . 
. . . . . . . . f f f . . . . . 
. . . . . . . . f f f f . . . f 
. . f . . . . f f f f f f f f f 
. . f f . . . f f f f . . . f f 
f f f f f f 1 f f 1 f . . . . . 
f f f f f f f f f f f . . . f . 
. f f f f f f f f f f f f f f f 
. f . . . f f f f f f f f f f f 
. f . . . f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. f . . . f f . . . . f f f f . 
. . . . . f f . . . . . f . . . 
. . . . . f f . . . . . f . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . . . f f f . . . . . 
. . . . . . . . f f f . . . . . 
. . . . . . . . f f f f . . . f 
. . . . . . . f f f f f f f f f 
. . . . . . . f f f f . . . f f 
f . . . f f 1 f f 1 f . . . . . 
f . . . f f f . . . . . . . f . 
. . . . f f f . . . . f f f f f 
. . . . . f f . . . . . f f f f 
. . . . . f f f . . . . . f f f 
. . . . . f f f f . . . . . f f 
. f . . . f f . . . . . . . . . 
. . . . . f f . . . . . . . . . 
. . . . . f f . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . . . f f f . . . . . 
. . . . . . . . f f f . . . . . 
. . . f f f f f f f f f . . . f 
. . . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f f 
f . . f f f f f f f f f f f . . 
f . f f f f 1 . . 1 . f f f f . 
. . f f f f f f f f . f f f f f 
. . f f f f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. f . . . f f . . . . . . . . . 
. . . . . f f . . . . . . . . . 
. . . . . f f . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. . . . . f f f f f f f f f . . 
. . . f f f f f f f f f f f . f 
. . . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f f 
f . . f f f f f f f f f f f . . 
f . f f f f 1 . . 1 . f f f f . 
. . f f f f f f f f . f f f f f 
. . f f f f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. f . . . f f f f f . f f f . . 
. . . . . f f f f f f f f f . . 
. . . . . f f f f f f f f f . . 
. . . . . . . f f f f f f f . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. . . . . f f f f f f f f f . . 
. . . f f f f f f f f f f f . f 
. . . f f f . . . f f f f f f f 
. . . f f f . . . f f f f f f f 
f . . f f . . . . f f f f f . . 
f . f f . . 1 . . 1 . f f f f . 
. . . . . . . . f f . f f f f f 
. . . . . . . . f f f f f f f f 
. . . . . . f f f f f f f f f f 
. . . . . f f f f f f f f f f f 
. f . . . f f f f f . f . . . . 
. . . . . f f f f f f f . . . . 
. . . . . f f f f f f . . . . . 
. . . . . . . f f f f . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f . . . . f . . 
. . . . . f f f f . . . . . . . 
. . . f f f f f f . . . . . . f 
. . . f f f . . . f . . . . . f 
. . . f f f f . . f f . . . . f 
f . . f f f f f f f f . . . . . 
f . f f f f 1 f f 1 . f . . . . 
. . . . . f f f f f . f . . . f 
. . . . . . f f f f f f . . . . 
. . . . . . . . f f f f . . . . 
. . . . . . . . . . f f . . . . 
. f . . . . . . . . . f . . . . 
. . . . . . . . . . f f . . . . 
. . . . . f f f f f f . . . . . 
. . . . . . . f f f f . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. . . . . f f f f f f f f f . . 
. . . f f f f f f f f f f f f f 
. . . f f f . . . f f f f f f f 
. . . f f f f . . f f f f f f f 
f . . f f f f f f f f . f f f . 
f . f f f f 1 f f 1 . f f f f . 
. . . . . f f f f f . f f f f f 
. . . . . . f f f f f f f f f . 
. . . . . . . . f f f f f f f . 
. . . . . . . f f f f f f f . . 
. f f f f . . f f f f f f f . . 
. . f f f . . f f f f f f . . . 
. . f f f f f f f f f . . . . . 
. . . . . . . f f f f . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. f f f f f f f f f f f f f . . 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f . 
f f f f f f 1 f f 1 . f f f f . 
. f f f f f f f f f . f f f f f 
. f f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f . 
. . f f f f f f f f f f f f f . 
. f f f f f f f f f f f f f f . 
. . f f f f f f f f f f f f f . 
. . f f f f f f f f f f f f f . 
. . . . . . . f f f f f f f f . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. f f f f . . . . f f f f f . . 
. f f f f . . . . f f f f f f f 
. f f f . . . . . f f f f f f f 
. f f . . . . . f f f f f f f f 
f f f . . . . . f f f f f f f . 
f f f . . 1 . f f 1 . f f f f . 
. f . . . . f f f f . f f f f f 
. . . . . . f f f f f f f f f . 
. . . . . . f f f f f f f f f . 
. . . . f f f f f f f f . . . . 
. f f f f f f f f f f f . . . . 
. . f f f f f f f f f f . . . . 
. . f f f f f f . . . . . . . . 
. . . . . . . f . . . . . . . . 
`,img`
. . . . f f f f f . f . . . . . 
. . . . . . f f f f f f f f . . 
. f f f f . . . . f f f f f . . 
. f f f f . . . . f f f f f f f 
. f f f f f f f f f f f f f f f 
. f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f . 
f f f f f f 1 f f f 1 f f f f . 
. f . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f . 
. . . f f f f f f f f f f f f . 
. . . f f f f f f f f f . . . . 
. f f f f f f f f f f f . . . . 
. . f f f f f f f f f f . . . . 
. . f f f f f f . . . . . . . . 
. . . . . . . f . . . . . . . . 
`,img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . f . . 
. f f . . . . . . . . . . . . . 
. f f f f . . . . . . . . . . f 
. f f f f f f f . . . . . . . f 
. f f f f f f f . . . . . . . f 
f f f f f f f f . . . . . . . . 
f f f f f f 1 f f f 1 f f f f . 
. f . f f f f f f f f f f f f f 
. . . f f f f f f f f f f f f . 
. . . f f f f f f f f f f f f . 
. . . f f f f f f f f f . . . . 
. f . . . . f . . . f f . . . . 
. . . . . . . . . . f f . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`,img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . f . . 
. f f . . . . . . . . . . . . . 
. f . . . . . . . . . . . . . f 
. f . . . f f f . . . . . . . . 
. f . . . . f f . . . . . . . . 
f f . . . . . f . . . . . . . . 
f f . . . . 1 f f f 1 . . . f . 
. f . . . . . f f f . . . . f f 
. . . . . . . . . . . . . . f . 
. . . . . f f . . . . . . . f . 
. . . f f f f . . . . . . . . . 
. f . . . . f . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`],
    70,
    true
    )
})
let _: Sprite = null
let nextGhostLocation: tiles.Location = null
let ecto: Sprite = null
let won = false
let holdingLight = false
let george: Sprite = null
george = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . f . . . . . . . . . 
. . . . . . f f f f . . . . . . 
. . . . . f . . . . f . . . . . 
. . . . . f . 1 . 1 f . . . . . 
. . . . . f . . f f f . . . . . 
. . . . . f f f f . . . . . . . 
. . . . . . . f . . . . . . . . 
. . . . . . f f f f f . . . . . 
. . . . f f f f . . . . . . . . 
. . . . f . . f . . . . . . . . 
. . . . . . . f f . . . . . . . 
. . . . . . f f f f . . . . . . 
. . . . . . f . . f . . . . . . 
. . . . . f . . . f . . . . . . 
`, SpriteKind.Player)
tiles.setTilemap(tiles.createTilemap(
            hex`36001800090909090909090909090909090909090909090909090909090909090909090909090909090909090909090909090909090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000001010101010000000000000000000000000000000000000000000000000000000000010101010100000101010101010100000000000000000000000001010100000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000002000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000006060600000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000001010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010101000001010101010101000000000001010101000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010100000000000000000000060000000000010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505050505`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . 2 2 2 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . 2 2 2 2 2 . . 2 2 2 2 2 2 2 . . . . . . . . . . . . 2 2 2 . . . . . . . . . . . . . . . . 
. . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 2 . . . . . . . . . . . . . 
. . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 2 . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 2 . . . . . . . . . . . . . . . . 
. . 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . 2 2 2 2 2 . . 2 2 2 2 2 2 2 . . . . . 2 2 2 2 . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . 2 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . 2 2 2 2 . . . . . . . . . . . . . . . . 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,myTiles.tile3,myTiles.tile4,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9],
            TileScale.Sixteen
        ))
tiles.placeOnRandomTile(george, myTiles.tile2)
scene.cameraFollowSprite(george)
george.ay = 400
controller.moveSprite(george, 100, 0)
lantern.setLightBandWidth(32)
lightsOn()
holdingLight = true
tilemap.createSpritesOnTiles(myTiles.tile4, SpriteKind.Enemy)
tilemap.replaceAllTiles(myTiles.tile4, myTiles.tile0)
tilemap.replaceAllTiles(myTiles.tile2, myTiles.tile0)
let playerLocations: tiles.Location[] = []
won = false
game.onUpdateInterval(100, function () {
    if (won) {
        if (0 < sprites.allOfKind(SpriteKind.Enemy).length) {
            ecto.follow(sprites.allOfKind(SpriteKind.Enemy)[0], 150)
        } else {
            ecto.follow(george, 100)
        }
    }
})
game.onUpdate(function () {
    if (holdingLight) {
        for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
            value.follow(george, 30)
            value.image.replace(1, 2)
        }
    } else {
        for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
            value.follow(george, 0)
            value.setVelocity(0, 0)
            value.image.replace(2, 1)
        }
    }
})
game.onUpdateInterval(500, function () {
    playerLocations.push(tilemap.locationOfSprite(george))
    if (playerLocations.length >= 10) {
        nextGhostLocation = playerLocations.shift()
    }
    if (Math.percentChance(30)) {
        nextGhostLocation = playerLocations.shift()
        _ = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`, SpriteKind.Enemy)
        tiles.placeOnTile(_, nextGhostLocation)
        _.x += (Math.randomRange(0, 4) - 2) * tilemap.tileWidth()
        _.y += (Math.randomRange(0, 4) - 2) * tilemap.tileWidth()
    }
})
